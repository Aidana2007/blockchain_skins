const mongoose = require('mongoose');const skinSchema = new mongoose.Schema({  name: {    type: String,    required: [true, 'Skin name is required'],    unique: true,    trim: true  },  description: {    type: String,    required: [true, 'Description is required'],    trim: true  },  priceSTM: {    type: Number,    required: [true, 'Price is required'],    min: [0, 'Price cannot be negative']  },  tokenId: {    type: Number,    required: true,    unique: true  },  imageUrl: {    type: String,    default: '/images/default-skin.png'  },  rarity: {    type: String,    enum: ['Common', 'Rare', 'Epic', 'Legendary'],    default: 'Common'  },  category: {    type: String,    enum: ['Weapon', 'Character', 'Vehicle', 'Accessory', 'Other'],    default: 'Other'  },  totalPurchases: {    type: Number,    default: 0  },  currentOwners: [{    type: mongoose.Schema.Types.ObjectId,    ref: 'User'  }],  isAvailable: {    type: Boolean,    default: true  },  createdBy: {    type: String,    default: 'Platform'  },  createdAt: {    type: Date,    default: Date.now  }}, {  timestamps: true});skinSchema.index({ name: 1 });skinSchema.index({ rarity: 1 });skinSchema.index({ category: 1 });skinSchema.index({ priceSTM: 1 });skinSchema.virtual('formattedPrice').get(function() {  return `${this.priceSTM.toLocaleString()} STM`;});skinSchema.methods.addOwner = async function(userId) {  if (!this.currentOwners.includes(userId)) {    this.currentOwners.push(userId);    this.totalPurchases += 1;    await this.save();  }};skinSchema.methods.isOwnedBy = function(userId) {  return this.currentOwners.some(id => id.toString() === userId.toString());};skinSchema.statics.getPopularSkins = function(limit = 10) {  return this.find({ isAvailable: true })    .sort({ totalPurchases: -1 })    .limit(limit);};skinSchema.statics.getSkinsByRarity = function(rarity) {  return this.find({ rarity, isAvailable: true });};skinSchema.statics.getSkinsByPriceRange = function(minPrice, maxPrice) {  return this.find({    priceSTM: { $gte: minPrice, $lte: maxPrice },    isAvailable: true  });};skinSchema.set('toJSON', { virtuals: true });skinSchema.set('toObject', { virtuals: true });module.exports = mongoose.model('Skin', skinSchema);